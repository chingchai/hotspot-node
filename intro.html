<html>

<head>
    <title>Turf.js: Using Turf with Leaflet</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
        integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
        crossorigin="" />
    <style>
        html,
        body,
        #map {
            padding: 0;
            margin: 0;
            height: 100%;
        }
    </style>
</head>

<body>

    <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
    integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
    crossorigin=""></script>

    <script src='https://npmcdn.com/@turf/turf@5.1.6/turf.min.js'></script>

    <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>

    <div id="map"></div>


    <script src="gis_data/fire.js" type="text/javascript"></script>
    <script src="gis_data/bnd.js" type="text/javascript"></script>

    <script>
        var map = L.map('map', {
            center: [16, 100],
            zoom: 5
        });
        L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png').addTo(map);
        // function onEachFeature(feature, layer) {
        //     layer.bindPopup("<h3>" + feature.properties.title + "</h3>" + feature.properties.description);
        // }
        // function filterFeat(feature, layer) {
        //     return feature.properties.value > 7;
        // }
        // var pointOne = turf.point([-106.32568, 35.11542], { "value": 2, "title": "Point One", "description": "This is the 1st point" });
        // var pointTwo = turf.point([-106, 35], { "value": 10, "title": "Point Two", "description": "This is the 2nd point" });
        
        // var fc = turf.featurecollection([pointOne, pointTwo]);
        // L.geoJson(fc, {
        //     onEachFeature: onEachFeature,
        //     filter: filterFeat
        // }).addTo(map);

          // load GeoJSON from an external file
            // $.getJSON("gis_data/fp.geojson", function (data) {
            //     // add GeoJSON layer to the map once the file is loaded
            //     L.geoJson(data).addTo(map);
            // });

        var bound = L.geoJson(bnd).addTo(map);
        //var bound = turf.polygon(bnd.features[0].geometry.coordinates[0]);
        //var boundFeatures = bound.getGeoJSON();
        
        var pois = L.geoJson(fire).addTo(map);
        //console.log(JSON.stringify(pois));
        //var poisFeatures = pois.getGeoJSON();

        var poly = turf.polygon(bnd.features[0].geometry.coordinates[0], bnd.features[0].properties);
        console.log(JSON.stringify(poly));

        var hp = turf.multiPoint(fire.features[0].geometry.coordinates[0], fire.features[0].properties);
        console.log(JSON.stringify(hp));


        // point
            var pt1 = turf.point([-77, 44], { desc: 199 });
            var pt2 = turf.point([-77, 38], { desc: 999 });

            // polygon
            var poly1 = turf.polygon([[
                [-81, 41],
                [-81, 47],
                [-72, 47],
                [-72, 41],
                [-81, 41]
            ]], { pop: 3000 });

            var poly2 = turf.polygon([[
                [-81, 35],
                [-81, 41],
                [-72, 41],
                [-72, 35],
                [-81, 35]
            ]], { pop: 1000 });

           //var points = turf.featuresCollection([pois]);
            //console.log(JSON.stringify(points));
            
            //var polygons = turf.featuresCollection([poly1, poly2]);
            //console.log(JSON.stringify(polygons));

            var tagged = turf.tag(pois, bound, 'latitude', 'longitude','bright_ti5','AP_CODE','AP_TN','PV_TN');
            console.log(JSON.stringify(tagged));

            //L.geoJson(tagged).addTo(map);
            
            
            //console.log(JSON.stringify(xx));

    </script>
</body>

</html>